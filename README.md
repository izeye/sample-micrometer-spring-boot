# Micrometer for Graphite

* Run Graphite as follows:

```
$ docker run -d\
  --name my-graphite\
  --restart=always\
  -p 80:80\
  -p 2003-2004:2003-2004\
  -p 2023-2024:2023-2024\
  -p 8125:8125/udp\
  -p 8126:8126\
  graphiteapp/graphite-statsd
```

* Check metrics as follows:

```
$ curl -s "http://localhost/tags/name?pretty=1" | jq ".values[].value"
"carbon.agents.363ffbf7206d-a.activeConnections"
"carbon.agents.363ffbf7206d-a.avgUpdateTime"
"carbon.agents.363ffbf7206d-a.blacklistMatches"
"carbon.agents.363ffbf7206d-a.cache.bulk_queries"
"carbon.agents.363ffbf7206d-a.cache.overflow"
"carbon.agents.363ffbf7206d-a.cache.queries"
"carbon.agents.363ffbf7206d-a.cache.queues"
"carbon.agents.363ffbf7206d-a.cache.size"
"carbon.agents.363ffbf7206d-a.committedPoints"
"carbon.agents.363ffbf7206d-a.cpuUsage"
"carbon.agents.363ffbf7206d-a.creates"
"carbon.agents.363ffbf7206d-a.droppedCreates"
"carbon.agents.363ffbf7206d-a.errors"
"carbon.agents.363ffbf7206d-a.memUsage"
"carbon.agents.363ffbf7206d-a.metricsReceived"
"carbon.agents.363ffbf7206d-a.pointsPerUpdate"
"carbon.agents.363ffbf7206d-a.updateOperations"
"carbon.agents.363ffbf7206d-a.whitelistRejects"
"carbon.aggregator.363ffbf7206d-a.activeConnections"
"carbon.aggregator.363ffbf7206d-a.aggregateDatapointsSent"
"carbon.aggregator.363ffbf7206d-a.allocatedBuffers"
"carbon.aggregator.363ffbf7206d-a.blacklistMatches"
"carbon.aggregator.363ffbf7206d-a.bufferedDatapoints"
"carbon.aggregator.363ffbf7206d-a.cpuUsage"
"carbon.aggregator.363ffbf7206d-a.destinations.127_0_0_1:2004:None.attemptedRelays"
"carbon.aggregator.363ffbf7206d-a.destinations.127_0_0_1:2004:None.batchesSent"
"carbon.aggregator.363ffbf7206d-a.destinations.127_0_0_1:2004:None.relayMaxQueueLength"
"carbon.aggregator.363ffbf7206d-a.destinations.127_0_0_1:2004:None.sent"
"carbon.aggregator.363ffbf7206d-a.memUsage"
"carbon.aggregator.363ffbf7206d-a.metricsReceived"
"carbon.aggregator.363ffbf7206d-a.whitelistRejects"
"jvm.buffer.count"
"jvm.buffer.memory.used"
"jvm.buffer.total.capacity"
"jvm.classes.loaded"
"jvm.classes.unloaded"
"jvm.gc.live.data.size"
"jvm.gc.max.data.size"
"jvm.gc.memory.allocated"
"jvm.gc.memory.promoted"
"jvm.gc.pause"
"jvm.memory.committed"
"jvm.memory.max"
"jvm.memory.used"
"jvm.threads.daemon"
"jvm.threads.live"
"jvm.threads.peak"
"jvm.threads.states"
"logback.events"
"my.counter"
"process.cpu.usage"
"process.files.max"
"process.files.open"
"process.start.time"
"process.uptime"
"stats.gauges.statsd.timestamp_lag"
"stats.response.200"
"stats.statsd.bad_lines_seen"
"stats.statsd.graphiteStats.calculationtime"
"stats.statsd.graphiteStats.flush_length"
"stats.statsd.graphiteStats.flush_time"
"stats.statsd.graphiteStats.last_exception"
"stats.statsd.graphiteStats.last_flush"
"stats.statsd.metrics_received"
"stats.statsd.packets_received"
"stats.statsd.processing_time"
"stats.timers.view.GET.count"
"stats.timers.view.GET.count_90"
"stats.timers.view.GET.count_ps"
"stats.timers.view.GET.lower"
"stats.timers.view.GET.mean"
"stats.timers.view.GET.mean_90"
"stats.timers.view.GET.median"
"stats.timers.view.GET.std"
"stats.timers.view.GET.sum"
"stats.timers.view.GET.sum_90"
"stats.timers.view.GET.sum_squares"
"stats.timers.view.GET.sum_squares_90"
"stats.timers.view.GET.upper"
"stats.timers.view.GET.upper_90"
"stats.timers.view.POST.count"
"stats.timers.view.POST.count_90"
"stats.timers.view.POST.count_ps"
"stats.timers.view.POST.lower"
"stats.timers.view.POST.mean"
"stats.timers.view.POST.mean_90"
"stats.timers.view.POST.median"
"stats.timers.view.POST.std"
"stats.timers.view.POST.sum"
"stats.timers.view.POST.sum_90"
"stats.timers.view.POST.sum_squares"
"stats.timers.view.POST.sum_squares_90"
"stats.timers.view.POST.upper"
"stats.timers.view.POST.upper_90"
"stats.timers.view.graphite.browser.views.GET.count"
"stats.timers.view.graphite.browser.views.GET.count_ps"
"stats.timers.view.graphite.browser.views.browser.GET.count"
"stats.timers.view.graphite.browser.views.browser.GET.count_ps"
"stats.timers.view.graphite.browser.views.header.GET.count"
"stats.timers.view.graphite.browser.views.header.GET.count_ps"
"stats.timers.view.graphite.browser.views.userGraphLookup.GET.count"
"stats.timers.view.graphite.browser.views.userGraphLookup.GET.count_ps"
"stats.timers.view.graphite.browser.views.userGraphLookup.GET.lower"
"stats.timers.view.graphite.browser.views.userGraphLookup.GET.mean"
"stats.timers.view.graphite.browser.views.userGraphLookup.GET.median"
"stats.timers.view.graphite.browser.views.userGraphLookup.GET.std"
"stats.timers.view.graphite.browser.views.userGraphLookup.GET.sum"
"stats.timers.view.graphite.browser.views.userGraphLookup.GET.sum_squares"
"stats.timers.view.graphite.browser.views.userGraphLookup.GET.upper"
"stats.timers.view.graphite.composer.views.GET.count"
"stats.timers.view.graphite.composer.views.GET.count_90"
"stats.timers.view.graphite.composer.views.GET.count_ps"
"stats.timers.view.graphite.composer.views.GET.lower"
"stats.timers.view.graphite.composer.views.GET.mean"
"stats.timers.view.graphite.composer.views.GET.mean_90"
"stats.timers.view.graphite.composer.views.GET.median"
"stats.timers.view.graphite.composer.views.GET.std"
"stats.timers.view.graphite.composer.views.GET.sum"
"stats.timers.view.graphite.composer.views.GET.sum_90"
"stats.timers.view.graphite.composer.views.GET.sum_squares"
"stats.timers.view.graphite.composer.views.GET.sum_squares_90"
"stats.timers.view.graphite.composer.views.GET.upper"
"stats.timers.view.graphite.composer.views.GET.upper_90"
"stats.timers.view.graphite.composer.views.composer.GET.count"
"stats.timers.view.graphite.composer.views.composer.GET.count_ps"
"stats.timers.view.graphite.composer.views.composer.GET.lower"
"stats.timers.view.graphite.composer.views.composer.GET.mean"
"stats.timers.view.graphite.composer.views.composer.GET.median"
"stats.timers.view.graphite.composer.views.composer.GET.sum"
"stats.timers.view.graphite.composer.views.composer.GET.sum_squares"
"stats.timers.view.graphite.errors.GET.count"
"stats.timers.view.graphite.errors.GET.count_90"
"stats.timers.view.graphite.errors.GET.count_ps"
"stats.timers.view.graphite.errors.GET.lower"
"stats.timers.view.graphite.errors.GET.mean"
"stats.timers.view.graphite.errors.GET.mean_90"
"stats.timers.view.graphite.errors.GET.median"
"stats.timers.view.graphite.errors.GET.std"
"stats.timers.view.graphite.errors.GET.sum"
"stats.timers.view.graphite.errors.GET.sum_90"
"stats.timers.view.graphite.errors.GET.sum_squares"
"stats.timers.view.graphite.errors.GET.sum_squares_90"
"stats.timers.view.graphite.errors.GET.upper"
"stats.timers.view.graphite.errors.GET.upper_90"
"stats.timers.view.graphite.errors.new_f.GET.count"
"stats.timers.view.graphite.errors.new_f.GET.count_90"
"stats.timers.view.graphite.errors.new_f.GET.count_ps"
"stats.timers.view.graphite.errors.new_f.GET.lower"
"stats.timers.view.graphite.errors.new_f.GET.mean"
"stats.timers.view.graphite.errors.new_f.GET.mean_90"
"stats.timers.view.graphite.errors.new_f.GET.median"
"stats.timers.view.graphite.errors.new_f.GET.std"
"stats.timers.view.graphite.errors.new_f.GET.sum"
"stats.timers.view.graphite.errors.new_f.GET.sum_90"
"stats.timers.view.graphite.errors.new_f.GET.sum_squares"
"stats.timers.view.graphite.errors.new_f.GET.sum_squares_90"
"stats.timers.view.graphite.errors.new_f.GET.upper"
"stats.timers.view.graphite.errors.new_f.GET.upper_90"
"stats.timers.view.graphite.tags.views.GET.count"
"stats.timers.view.graphite.tags.views.GET.count_90"
"stats.timers.view.graphite.tags.views.GET.count_ps"
"stats.timers.view.graphite.tags.views.GET.lower"
"stats.timers.view.graphite.tags.views.GET.mean"
"stats.timers.view.graphite.tags.views.GET.mean_90"
"stats.timers.view.graphite.tags.views.GET.median"
"stats.timers.view.graphite.tags.views.GET.std"
"stats.timers.view.graphite.tags.views.GET.sum"
"stats.timers.view.graphite.tags.views.GET.sum_90"
"stats.timers.view.graphite.tags.views.GET.sum_squares"
"stats.timers.view.graphite.tags.views.GET.sum_squares_90"
"stats.timers.view.graphite.tags.views.GET.upper"
"stats.timers.view.graphite.tags.views.GET.upper_90"
"stats.timers.view.graphite.tags.views.POST.count"
"stats.timers.view.graphite.tags.views.POST.count_90"
"stats.timers.view.graphite.tags.views.POST.count_ps"
"stats.timers.view.graphite.tags.views.POST.lower"
"stats.timers.view.graphite.tags.views.POST.mean"
"stats.timers.view.graphite.tags.views.POST.mean_90"
"stats.timers.view.graphite.tags.views.POST.median"
"stats.timers.view.graphite.tags.views.POST.std"
"stats.timers.view.graphite.tags.views.POST.sum"
"stats.timers.view.graphite.tags.views.POST.sum_90"
"stats.timers.view.graphite.tags.views.POST.sum_squares"
"stats.timers.view.graphite.tags.views.POST.sum_squares_90"
"stats.timers.view.graphite.tags.views.POST.upper"
"stats.timers.view.graphite.tags.views.POST.upper_90"
"stats.timers.view.graphite.tags.views.tagDetails.GET.count"
"stats.timers.view.graphite.tags.views.tagDetails.GET.count_90"
"stats.timers.view.graphite.tags.views.tagDetails.GET.count_ps"
"stats.timers.view.graphite.tags.views.tagDetails.GET.lower"
"stats.timers.view.graphite.tags.views.tagDetails.GET.mean"
"stats.timers.view.graphite.tags.views.tagDetails.GET.mean_90"
"stats.timers.view.graphite.tags.views.tagDetails.GET.median"
"stats.timers.view.graphite.tags.views.tagDetails.GET.std"
"stats.timers.view.graphite.tags.views.tagDetails.GET.sum"
"stats.timers.view.graphite.tags.views.tagDetails.GET.sum_90"
"stats.timers.view.graphite.tags.views.tagDetails.GET.sum_squares"
"stats.timers.view.graphite.tags.views.tagDetails.GET.sum_squares_90"
"stats.timers.view.graphite.tags.views.tagDetails.GET.upper"
"stats.timers.view.graphite.tags.views.tagDetails.GET.upper_90"
"stats.timers.view.graphite.tags.views.tagList.GET.count"
"stats.timers.view.graphite.tags.views.tagList.GET.count_90"
"stats.timers.view.graphite.tags.views.tagList.GET.count_ps"
"stats.timers.view.graphite.tags.views.tagList.GET.lower"
"stats.timers.view.graphite.tags.views.tagList.GET.mean"
"stats.timers.view.graphite.tags.views.tagList.GET.mean_90"
"stats.timers.view.graphite.tags.views.tagList.GET.median"
"stats.timers.view.graphite.tags.views.tagList.GET.std"
"stats.timers.view.graphite.tags.views.tagList.GET.sum"
"stats.timers.view.graphite.tags.views.tagList.GET.sum_90"
"stats.timers.view.graphite.tags.views.tagList.GET.sum_squares"
"stats.timers.view.graphite.tags.views.tagList.GET.sum_squares_90"
"stats.timers.view.graphite.tags.views.tagList.GET.upper"
"stats.timers.view.graphite.tags.views.tagList.GET.upper_90"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.count"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.count_90"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.count_ps"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.lower"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.mean"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.mean_90"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.median"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.std"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.sum"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.sum_90"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.sum_squares"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.sum_squares_90"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.upper"
"stats.timers.view.graphite.tags.views.tagMultiSeries.POST.upper_90"
"stats_counts.response.200"
"stats_counts.statsd.bad_lines_seen"
"stats_counts.statsd.metrics_received"
"stats_counts.statsd.packets_received"
"statsd.numStats"
"system.cpu.count"
"system.cpu.usage"
"system.load.average.1m"
"tomcat.sessions.active.current"
"tomcat.sessions.active.max"
"tomcat.sessions.alive.max"
"tomcat.sessions.created"
"tomcat.sessions.expired"
"tomcat.sessions.rejected"
$
```